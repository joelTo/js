{"version":3,"sources":["webpack:///webpack/bootstrap abd59030e9708055425c","webpack:///./src/app.js","webpack:///./src/services/recipes.service.js","webpack:///./src/services/pizzeria.service.js"],"names":["recipesService","pizzeriaService","start","RecipesService","recipes","Promise","resolve","fetch","then","response","json","recipe","pizza","toppings","length","reduce","acc","topping","indexOf","lastIndexOf","getRecipes","isRecipeCompliant","name","find","catch","handleError","map","query","filter","toLowerCase","includes","err","alert","PizzeriaService","pool","time","getRecipesNames","intervalId","setInterval","index","Math","floor","random","recipesNames","recipeName","push","console","log","clearInterval"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap abd59030e9708055425c","import { RecipesService } from './services/recipes.service';\r\nimport { PizzeriaService } from './services/pizzeria.service';\r\n\r\nconst recipesService = new RecipesService();\r\nconst pizzeriaService = new PizzeriaService(recipesService);\r\n\r\npizzeriaService.start(1000);\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","export class RecipesService {\r\n    constructor(){\r\n        this.recipes = null;\r\n    }\r\n\r\n    // return Promise<[recipe]>\r\n    getRecipes() {\r\n        if (this.recipes) return Promise.resolve(this.recipes);\r\n\r\n        return fetch('http://localhost:3000/recipes')\r\n        .then(response => response.json())\r\n        .then(recipes => this.recipes = recipes);\r\n    }\r\n\r\n    isRecipeCompliant(recipe, pizza) {\r\n        if (recipe.toppings.length !== pizza.toppings.length) return false;\r\n\r\n        return pizza.toppings.reduce((acc, topping) =>\r\n            acc \r\n            && recipe.toppings.indexOf(topping) !== -1 \r\n            && pizza.toppings.indexOf(topping) === pizza.toppings.lastIndexOf(topping)\r\n            , true);\r\n    }\r\n\r\n    getPizzaRecipeName (pizza) {\r\n        return this.getRecipes()\r\n        .then(recipes => {\r\n            return recipes.reduce(\r\n                (acc, recipe) => \r\n                acc \r\n                || (this.isRecipeCompliant(recipe, pizza) ? recipe.name : false), \r\n            false);\r\n        })\r\n    }\r\n\r\n    getRecipe(name) {\r\n        return this.getRecipes()\r\n        .then(recipes => recipes.find(recipe => recipe.name === name))\r\n        .catch(this.handleError)\r\n    }\r\n\r\n    getRecipesNames() {\r\n        return this.getRecipes()\r\n        .then(recipes => recipes.map(recipe => recipe.name))\r\n        .catch(this.handleError)\r\n    }\r\n\r\n    queryRecipes(query) {\r\n        return this.getRecipes()\r\n        .then(recipes =>\r\n            recipes\r\n            .filter(recipe => \r\n                recipe.name.toLowerCase().includes(query.toLowerCase())\r\n            )\r\n        );\r\n    }\r\n\r\n    handleError(err) {\r\n        alert('Une erreur est survenue')\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/recipes.service.js","export class PizzeriaService {\r\n\r\n    constructor (recipesService) {\r\n        this.pool = [];\r\n        this.recipesService = recipesService;\r\n    }\r\n\r\n    start (time) {\r\n        // every time seconds add a new recipe name to the pool\r\n        this.recipesService.getRecipesNames()\r\n        .then(recipesNames => {\r\n            const intervalId = setInterval(() => {\r\n                const index = Math.floor(Math.random() * recipesNames.length);\r\n                const recipeName = recipesNames[index];\r\n                this.pool.push(recipeName);\r\n                console.log('POOL : ', this.pool);\r\n\r\n                if (this.pool.length >= 10) {\r\n                    console.log('GAME OVER');\r\n                    clearInterval(intervalId);\r\n                }\r\n            }, time);\r\n\r\n        })\r\n    }\r\n\r\n    // { id: 1, toppings: ['', ''] }\r\n    sendPizza (pizza) {\r\n        this.recipesService.getRecipes()\r\n        .then(recipes => {\r\n            // if (this.recipesService.isRecipeCompliant(recipe, ))\r\n        })\r\n        console.log('pizza', pizza);\r\n        // si pizza correspondante est trouvée dans le pool on l'enlève du pool\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/pizzeria.service.js"],"sourceRoot":""}