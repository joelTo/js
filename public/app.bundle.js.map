{"version":3,"sources":["webpack:///webpack/bootstrap 0135643615086d8dffc7","webpack:///./src/app.js","webpack:///./src/services/recipes.service.js","webpack:///./src/services/pizzeria.service.js"],"names":["recipesService","pizzeriaService","console","log","start","RecipesService","recipes","Promise","resolve","fetch","then","response","json","recipe","pizza","toppings","length","reduce","acc","topping","indexOf","lastIndexOf","getRecipes","isRecipeCompliant","name","find","catch","handleError","map","query","filter","toLowerCase","includes","err","alert","PizzeriaService","pool","time","getRecipesNames","intervalId","setInterval","index","Math","floor","random","recipesNames","recipeName","push","clearInterval","pizzaName","idx","splice"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0135643615086d8dffc7","import { RecipesService } from './services/recipes.service';\nimport { PizzeriaService } from './services/pizzeria.service';\n\nconst recipesService = new RecipesService();\nconst pizzeriaService = new PizzeriaService(recipesService);\n\nconsole.log('YEAH !!!')\n\npizzeriaService.start(1000);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","export class RecipesService {\n    constructor(){\n        this.recipes = null;\n    }\n\n    // return Promise<[recipe]>\n    getRecipes() {\n        if (this.recipes) return Promise.resolve(this.recipes);\n\n        return fetch('http://localhost:3000/recipes')\n        .then(response => response.json())\n        .then(recipes => this.recipes = recipes);\n    }\n\n    isRecipeCompliant(recipe, pizza) {\n        if (recipe.toppings.length !== pizza.toppings.length) return false;\n\n        return pizza.toppings.reduce((acc, topping) =>\n            acc \n            && recipe.toppings.indexOf(topping) !== -1 \n            && pizza.toppings.indexOf(topping) === pizza.toppings.lastIndexOf(topping)\n            , true);\n    }\n\n    getPizzaRecipeName (pizza) {\n        return this.getRecipes()\n        .then(recipes => {\n            return recipes.reduce(\n                (acc, recipe) => \n                acc \n                || (this.isRecipeCompliant(recipe, pizza) ? recipe.name : false), \n            false);\n        })\n    }\n\n    getRecipe(name) {\n        return this.getRecipes()\n        .then(recipes => recipes.find(recipe => recipe.name === name))\n        .catch(this.handleError)\n    }\n\n    getRecipesNames() {\n        return this.getRecipes()\n        .then(recipes => recipes.map(recipe => recipe.name))\n        .catch(this.handleError)\n    }\n\n    queryRecipes(query) {\n        return this.getRecipes()\n        .then(recipes =>\n            recipes\n            .filter(recipe => \n                recipe.name.toLowerCase().includes(query.toLowerCase())\n            )\n        );\n    }\n\n    handleError(err) {\n        alert('Une erreur est survenue')\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/recipes.service.js","export class PizzeriaService {\n\n    constructor (recipesService) {\n        this.pool = [];\n        this.recipesService = recipesService;\n    }\n\n    start (time) {\n        // every time seconds add a new recipe name to the pool\n        this.recipesService.getRecipesNames()\n        .then(recipesNames => {\n            const intervalId = setInterval(() => {\n                const index = Math.floor(Math.random() * recipesNames.length);\n                const recipeName = recipesNames[index];\n                this.pool.push(recipeName);\n                console.log('POOL : ', this.pool);\n\n                if (this.pool.length >= 10) {\n                    console.log('GAME OVER');\n                    clearInterval(intervalId);\n                }\n            }, time);\n\n        })\n    }\n\n    // { id: 1, toppings: ['', ''] }\n    sendPizza (pizzaName) {\n        const idx = this.pool.indexOf(pizzaName);\n        if (idx !== -1) this.pool.splice(idx, 1);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/pizzeria.service.js"],"sourceRoot":""}